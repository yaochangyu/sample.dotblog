events {}

http {
    # 定義上游服務池
    upstream backend {
        server app1:80 weight=1; # app1 容器
        server app2:80 weight=1; # app2 容器
    }

    server {
        listen 80; # Nginx 容器內部仍需監聽 80 端口

        # 根路徑導向上游服務池
        location / {
            proxy_pass http://backend; # 將請求代理到上游服務池
        }

        # 可選：仍保留 /app1 和 /app2 路徑的單獨代理
        location /app1 {
            proxy_pass http://app1:80;
        }

        location /app2 {
            proxy_pass http://app2:80;
        }
    }
}