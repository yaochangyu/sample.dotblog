# ğŸ“‹ å¦‚ä½•å–å¾— GitLab ä¸Šæ‰€æœ‰é–‹ç™¼è€…

## ğŸ¯ å®Œæ•´æµç¨‹

### æ­¥é©Ÿ 1: å–å¾— GitLab Access Token

#### 1.1 ç™»å…¥ GitLab
```
ç€è¦½å™¨é–‹å•Ÿ: https://192.168.1.158
```

#### 1.2 å»ºç«‹ Personal Access Token
1. é»é¸å³ä¸Šè§’**é ­åƒ** > **Preferences** (è¨­å®š)
2. å·¦å´é¸å–®é¸æ“‡ **Access Tokens**
3. å¡«å¯«ä»¥ä¸‹è³‡è¨Š:
   - **Token name**: `developer-analyzer`
   - **Expiration date**: è¨­å®šéæœŸæ™‚é–“ï¼ˆå»ºè­° 30 å¤©ï¼‰
   - **Select scopes**: å‹¾é¸ä»¥ä¸‹æ¬Šé™
     - âœ… `read_api` - è®€å– API
     - âœ… `read_user` - è®€å–ä½¿ç”¨è€…è³‡è¨Š
     - âœ… `read_repository` - è®€å–å„²å­˜åº«
4. é»é¸ **Create personal access token**
5. **é‡è¦**: ç«‹å³è¤‡è£½é¡¯ç¤ºçš„ tokenï¼ˆåªæœƒé¡¯ç¤ºä¸€æ¬¡ï¼‰
   - æ ¼å¼: `glpat-xxxxxxxxxxxxxxxxxxxxx`

---

### æ­¥é©Ÿ 2: åŸ·è¡Œå–å¾—è…³æœ¬

#### æ–¹æ³• A: ä½¿ç”¨ Python è…³æœ¬ï¼ˆæ¨è–¦ï¼‰â­

```bash
cd /mnt/d/lab/sample.dotblog/Gitlab/Lab.PersonInfo

python3 get_gitlab_developers.py https://192.168.1.158 glpat-ä½ çš„token
```

**è¼¸å‡ºï¼š**
- æ‰€æœ‰ GitLab ä½¿ç”¨è€…æ¸…å–®
- æ‰€æœ‰å¯å­˜å–çš„å°ˆæ¡ˆæ¸…å–®
- è‡ªå‹•å„²å­˜ JSON æª”æ¡ˆåˆ° `output/` ç›®éŒ„

#### æ–¹æ³• B: ä½¿ç”¨ Shell è…³æœ¬

```bash
bash get_gitlab_developers.sh https://192.168.1.158 glpat-ä½ çš„token
```

---

### æ­¥é©Ÿ 3: æŸ¥çœ‹çµæœ

```bash
# æŸ¥çœ‹ä½¿ç”¨è€…æ¸…å–®
cat output/gitlab_users.json

# æŸ¥çœ‹å°ˆæ¡ˆæ¸…å–®
cat output/gitlab_projects.json
```

---

## ğŸ”§ è©³ç´°ä½¿ç”¨èªªæ˜

### Python è…³æœ¬åŠŸèƒ½

**åŸ·è¡Œï¼š**
```bash
python3 get_gitlab_developers.py <GitLab URL> <Access Token>
```

**æœƒåŸ·è¡Œä»¥ä¸‹å‹•ä½œï¼š**
1. âœ… æ¸¬è©¦ GitLab API é€£ç·š
2. ğŸ“Š å–å¾—æ‰€æœ‰ GitLab ä½¿ç”¨è€…
   - ID
   - ä½¿ç”¨è€…åç¨±
   - å§“å
   - Email
3. ğŸ“ å–å¾—æ‰€æœ‰å¯å­˜å–çš„å°ˆæ¡ˆ
   - å°ˆæ¡ˆ ID
   - å°ˆæ¡ˆåç¨±
   - HTTP/SSH URL
4. ğŸ’¾ è‡ªå‹•å„²å­˜ç‚º JSON æª”æ¡ˆ

**è¼¸å‡ºæª”æ¡ˆï¼š**
- `output/gitlab_users.json` - æ‰€æœ‰ä½¿ç”¨è€…è³‡è¨Š
- `output/gitlab_projects.json` - æ‰€æœ‰å°ˆæ¡ˆæ¸…å–®

---

## ğŸ“– å®Œæ•´ç¯„ä¾‹

```bash
# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd /mnt/d/lab/sample.dotblog/Gitlab/Lab.PersonInfo

# åŸ·è¡Œ GitLab è³‡æ–™å–å¾—
python3 get_gitlab_developers.py \
  https://192.168.1.158 \
  glpat-abc123xyz456

# è¼¸å‡ºç¯„ä¾‹ï¼š
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘         GitLab é–‹ç™¼è€…è³‡è¨Šå–å¾—å·¥å…·                            â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 
# ğŸ” æ­£åœ¨é€£æ¥ GitLab: https://192.168.1.158
# 
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 1ï¸âƒ£  æ¸¬è©¦ GitLab API é€£ç·š...
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# âœ… é€£ç·šæˆåŠŸï¼ç•¶å‰ä½¿ç”¨è€…: admin
# 
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 2ï¸âƒ£  å–å¾—æ‰€æœ‰ GitLab ä½¿ç”¨è€…...
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 
# æ‰¾åˆ° 5 ä½ä½¿ç”¨è€…:
# 
# ID       ä½¿ç”¨è€…åç¨±         å§“å                    Email
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 1        admin              Administrator           admin@example.com
# 2        john.doe           John Doe                john@example.com
# 3        jane.smith         Jane Smith              jane@example.com
# 
# ğŸ’¾ å·²å„²å­˜åˆ°: ./output/gitlab_users.json
# 
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 3ï¸âƒ£  å–å¾—æ‰€æœ‰å¯å­˜å–çš„å°ˆæ¡ˆ...
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 
# æ‰¾åˆ° 3 å€‹å°ˆæ¡ˆ:
# 
# ID       å°ˆæ¡ˆåç¨±                            HTTP URL
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 101      MyGroup / Project-A                 https://192.168.1.158/mygroup/project-a.git
# 102      MyGroup / Project-B                 https://192.168.1.158/mygroup/project-b.git
# 
# ğŸ’¾ å·²å„²å­˜åˆ°: ./output/gitlab_projects.json
# 
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# âœ… è³‡æ–™å–å¾—å®Œæˆ
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# æŸ¥çœ‹è¼¸å‡ºæª”æ¡ˆ
cat output/gitlab_users.json
cat output/gitlab_projects.json
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### 1. å–å¾— GitLab è³‡æ–™

```bash
# å–å¾—æ‰€æœ‰é–‹ç™¼è€…å’Œå°ˆæ¡ˆ
python3 get_gitlab_developers.py https://192.168.1.158 glpat-your-token
```

### 2. Clone æƒ³åˆ†æçš„å°ˆæ¡ˆ

```bash
# å¾è¼¸å‡ºçš„å°ˆæ¡ˆæ¸…å–®ä¸­é¸æ“‡
git clone https://192.168.1.158/mygroup/project-a.git

cd project-a
```

### 3. åˆ†æå°ˆæ¡ˆä¸­çš„é–‹ç™¼è€…

```bash
# è¿”å›åˆ†æå·¥å…·ç›®éŒ„
cd /mnt/d/lab/sample.dotblog/Gitlab/Lab.PersonInfo

# åˆ†æå°ˆæ¡ˆé–‹ç™¼è€…
python3 scripts/developer_analyzer.py "é–‹ç™¼è€…åç¨±" "2024-01-01" "2024-12-31"
```

---

## âš ï¸ å¸¸è¦‹å•é¡Œ

### âŒ é€£ç·šå¤±æ•—

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
âŒ é€£ç·šå¤±æ•—: Connection refused
```

**å¯èƒ½åŸå› ï¼š**
1. GitLab æœå‹™æœªå•Ÿå‹•
2. ç¶²è·¯ç„¡æ³•é€£åˆ° 192.168.1.158
3. GitLab URL éŒ¯èª¤

**è§£æ±ºæ–¹æ³•ï¼š**
```bash
# æ¸¬è©¦ç¶²è·¯é€£ç·š
ping 192.168.1.158

# æ¸¬è©¦ GitLab æœå‹™
curl -k https://192.168.1.158
```

---

### âŒ Token ç„¡æ•ˆ

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
âŒ é€£ç·šå¤±æ•—: HTTP 401
```

**å¯èƒ½åŸå› ï¼š**
1. Token éæœŸ
2. Token æ¬Šé™ä¸è¶³
3. Token è¢«æ’¤éŠ·

**è§£æ±ºæ–¹æ³•ï¼š**
é‡æ–°å»ºç«‹ Access Tokenï¼ˆåƒè€ƒæ­¥é©Ÿ 1ï¼‰

---

### âŒ SSL æ†‘è­‰å•é¡Œ

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
SSL: CERTIFICATE_VERIFY_FAILED
```

**èªªæ˜ï¼š**
å…§éƒ¨ GitLab å¯èƒ½ä½¿ç”¨è‡ªç°½æ†‘è­‰ï¼Œè…³æœ¬å·²è‡ªå‹•è™•ç†ï¼ˆä½¿ç”¨ `verify=False`ï¼‰

---

## ğŸ“Š è¼¸å‡ºæª”æ¡ˆæ ¼å¼

### gitlab_users.json

```json
[
  {
    "id": 1,
    "username": "admin",
    "name": "Administrator",
    "email": "admin@example.com",
    "state": "active"
  },
  {
    "id": 2,
    "username": "john.doe",
    "name": "John Doe",
    "email": "john@example.com",
    "state": "active"
  }
]
```

### gitlab_projects.json

```json
[
  {
    "id": 101,
    "name": "MyGroup / Project-A",
    "http_url": "https://192.168.1.158/mygroup/project-a.git",
    "ssh_url": "git@192.168.1.158:mygroup/project-a.git",
    "web_url": "https://192.168.1.158/mygroup/project-a"
  }
]
```

---

## ğŸ’¡ é€²éšä½¿ç”¨

### åˆ†æç‰¹å®šå°ˆæ¡ˆçš„è²¢ç»è€…

```bash
# 1. Clone å°ˆæ¡ˆ
git clone https://192.168.1.158/mygroup/project-a.git

# 2. é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd project-a

# 3. åˆ—å‡ºå°ˆæ¡ˆé–‹ç™¼è€…
git shortlog -sn --all

# 4. åˆ†æç‰¹å®šé–‹ç™¼è€…
cd /mnt/d/lab/sample.dotblog/Gitlab/Lab.PersonInfo
python3 scripts/developer_analyzer.py "é–‹ç™¼è€…åç¨±" "2024-01-01" "2024-12-31"
```

---

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é …

1. **Token ä¿å¯†**
   - âš ï¸ ä¸è¦å°‡ token æäº¤åˆ° Git
   - âš ï¸ ä¸è¦åˆ†äº«çµ¦ä»–äºº
   - âš ï¸ å®šæœŸæ›´æ› token

2. **æ¬Šé™æœ€å°åŒ–**
   - åªçµ¦å¿…è¦çš„æ¬Šé™ï¼ˆread_api, read_user, read_repositoryï¼‰
   - ä¸è¦çµ¦ write æ¬Šé™

3. **Token éæœŸ**
   - å»ºè­°è¨­å®š 30 å¤©éæœŸ
   - å®šæœŸæª¢æŸ¥ä¸¦æ›´æ–°

---

**å·¥å…·ç‰ˆæœ¬ï¼š** v1.0  
**æœ€å¾Œæ›´æ–°ï¼š** 2026-01-13
