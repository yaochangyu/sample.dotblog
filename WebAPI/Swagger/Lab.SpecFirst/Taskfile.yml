version: "3"

dotenv: [ "secrets/secrets.env" ]

tasks:
  rest-codegen-code:
    cmds:
      - task: rest-codegen-client
      - task: rest-codegen-server
        
  rest-codegen-client:
    desc: 產生 Client Code
    cmds:
      - nswag openapi2csclient /input:doc/index.yaml /classname:LabSpecClient /namespace:Lab.SpecFirst.Adapter /output:src/Lab.SpecFirst.Adapter/AutoGenerated/LabSpecClient.cs /jsonLibrary:SystemTextJson /generateClientInterfaces:true /exposeJsonSerializerSettings:false /useBaseUrl:false

  rest-codegen-server:
    desc: 產生 Server Code
    cmds:
      - nswag openapi2cscontroller /input:doc/index.yaml /classname:SpecFirstConteoller /namespace:Lab.SpecFirst.Web /output:src/Lab.SpecFirst.Web/AutoGenerated/Controller.cs /jsonLibrary:SystemTextJson 
