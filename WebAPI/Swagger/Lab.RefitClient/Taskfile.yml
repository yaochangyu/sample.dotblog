# Taskfile.yml

version: "3"

tasks:
  codegen:
    desc: codegen client and server
    cmds:
      - task: codegen-client
      - task: codegen-server
  codegen-client:
    desc: codegen client
    cmds:
      - refitter ./openapi.json --namespace "Lab.RefitClient.GeneratedCode.PetStore" --output ./Lab.RefitClient/PetStoreClient.cs --use-api-response --no-operation-headers --no-auto-generated-header  
  codegen-server:
    desc: codegen server
    cmds:
      - nswag openapi2cscontroller /input:./openapi.json /classname:PetStore /namespace:Lab.RefitClient.WebAPI.Controllers /output:Lab.RefitClient.WebAPI/Controllers/AutoGenerated/PetStoreController.cs /jsonLibrary:SystemTextJson /useCancellationToken:true /excludedParameterNames:x-idempotency-key,x-api-key
