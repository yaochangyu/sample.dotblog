# Taskfile.yml

version: "3"

dotenv: [ "env/local.env" ]

tasks:
  ## Develop ---------------------------------------------------
  dev-init:
    desc: Init development environment
    cmds:
      - task: redis-start
        
  redis-start:
    desc: start redis 5.X version
    cmds:
      - docker-compose up -d redis

  redis-admin-start:
    desc: admin ui to manage redis
    cmds:
      - docker-compose up -d redis-admin
  
  ef-codegen:
    desc: Init development environment
    cmds:
      - task: ef-codegen-member
        
  ef-codegen-member:
    desc: EF Core 反向工程產生 MemberDbContext EF Entities
    dir: "src/Lab.Sharding.DB"
    cmds:
      - dotnet ef dbcontext scaffold "$SYS_DATABASE_CONNECTION_STRING1" Microsoft.EntityFrameworkCore.SqlServer -o AutoGenerated/Entities -c MemberDbContext --context-dir AutoGenerated/ -n Lab.Sharding.DB -t Member01 --force --no-onconfiguring --use-database-names --schema Member01
 